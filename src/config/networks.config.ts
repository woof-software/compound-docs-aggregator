import { registerAs } from '@nestjs/config';
import { NetworkConfig } from 'network/network.types';

const ankrKey = process.env.ANKR_KEY;
if (!ankrKey) throw new Error('ANKR_KEY was not provided!');

const quickNodeKey = process.env.UNICHAIN_QUICKNODE_KEY;
if (!quickNodeKey) throw new Error('UNICHAIN_QUICKNODE_KEY was not provided!');

export default registerAs('networks', (): NetworkConfig[] => [
  {
    network: 'mainnet',
    chainId: 1,
    url: `https://rpc.ankr.com/eth/${ankrKey}`,
    sortPosition: 1,
    blockscanOrigin: 'https://etherscan.io/',
    displayName: 'Ethereum Mainnet',
    indexingEnabled: true,
    reorgWindow: 64,
    comptrollerV2: '0x3d9819210a31b4961b30ef54be2aed79b9c9cd3b',
    configuratorV3: '0x316f9708bb98af7da9c68c1c3b5e79039cd336e3',
    rewardsV3: '0x1b0e765f6224c21223aea2af16c1c46e38885a40',
    // startBlock: 15331590,
    startBlock: 7710671,
    rewardsCalcEnabled: true,
    comp: '0xc00e94cb662c3520282e6f5717214004a7f26888',
    svrFeeRecipient: '0xd9496f2a3fd2a97d8a4531d92742f3c8f53183cb',
  },
  {
    network: 'optimism',
    chainId: 10,
    url: `https://rpc.ankr.com/optimism/${ankrKey}`,
    sortPosition: 2,
    blockscanOrigin: 'https://optimistic.etherscan.io/',
    displayName: 'Optimism',
    indexingEnabled: true,
    reorgWindow: 32,
    configuratorV3: '0x84e93ec6170ed630f5ebd89a1aae72d4f63f2713',
    rewardsV3: '0x443ea0340cb75a160f31a440722dec7b5bc3c2e9',
    startBlock: 118406281,
    rewardsCalcEnabled: true,
  },
  {
    network: 'unichain',
    chainId: 130,
    // url: `https://unichain.drpc.org`,
    // url: `https://solemn-smart-violet.unichain-mainnet.quiknode.pro/${quickNodeKey}`,
    url: `https://multi-boldest-patina.unichain-mainnet.quiknode.pro/${quickNodeKey}`,
    sortPosition: 3,
    blockscanOrigin: 'https://uniscan.xyz/',
    displayName: 'Unichain',
    indexingEnabled: true,
    reorgWindow: 32,
    configuratorV3: '0x8df378453ff9deffa513367cdf9b3b53726303e9',
    rewardsV3: '0x6f7d514bbd4aff3bcd1140b7344b32f063dee486',
    startBlock: 9170506,
    rewardsCalcEnabled: true,
  },
  {
    network: 'polygon',
    chainId: 137,
    url: `https://rpc.ankr.com/polygon/${ankrKey}`,
    sortPosition: 4,
    blockscanOrigin: 'https://polygonscan.com/',
    displayName: 'Polygon Mainnet',
    indexingEnabled: true,
    reorgWindow: 256,
    configuratorV3: '0x83e0f742cacbe66349e3701b171ee2487a26e738',
    rewardsV3: '0x45939657d1ca34a8fa39a924b71d28fe8431e581',
    startBlock: 39412378,
    rewardsCalcEnabled: true,
  },
  {
    network: 'ronin',
    chainId: 2020,
    url: 'https://ronin.drpc.org',
    batchMaxCount: 3,
    // url: 'https://ronin.lgns.net/rpc',
    sortPosition: 5,
    blockscanOrigin: 'https://app.roninchain.com/',
    displayName: 'Ronin',
    indexingEnabled: true,
    reorgWindow: 64,
    configuratorV3: '0x966c72f456fc248d458784ef3e0b6d042be115f2',
    rewardsV3: '0x31cdee8609bc15fd33cc525f101b70a81b2b1e59',
    startBlock: 43343880,
    rewardsCalcEnabled: false, // !: has not rewards
  },
  {
    network: 'mantle',
    chainId: 5000,
    url: `https://rpc.ankr.com/mantle/${ankrKey}`,
    sortPosition: 6,
    blockscanOrigin: 'https://mantlescan.xyz/',
    displayName: 'Mantle',
    indexingEnabled: true,
    reorgWindow: 32,
    configuratorV3: '0xb77cd4cd000957283d8baf53cd782ecf029cf7db',
    rewardsV3: '0xcd83cbbfce149d141a5171c3d6a0f0fccee225ab',
    startBlock: 70789059,
    rewardsCalcEnabled: true,
  },
  {
    network: 'base',
    chainId: 8453,
    url: `https://rpc.ankr.com/base/${ankrKey}`,
    sortPosition: 7,
    blockscanOrigin: 'https://basescan.org/',
    displayName: 'Base',
    indexingEnabled: true,
    reorgWindow: 32,
    configuratorV3: '0x45939657d1ca34a8fa39a924b71d28fe8431e581',
    rewardsV3: '0x123964802e6ababbe1bc9547d72ef1b69b00a6b1',
    startBlock: 2197594,
    rewardsCalcEnabled: true,
    svrFeeReceiver: '0xb3e79c7cac540ca833015e63d96d3032ba0c4129',
  },
  {
    network: 'arbitrum',
    chainId: 42161,
    url: `https://rpc.ankr.com/arbitrum/${ankrKey}`,
    sortPosition: 8,
    blockscanOrigin: 'https://arbiscan.io/',
    displayName: 'Arbitrum',
    indexingEnabled: true,
    reorgWindow: 32,
    configuratorV3: '0xb21b06d71c75973babde35b49ffdac3f82ad3775',
    rewardsV3: '0x88730d254a2f7e6ac8388c3198afd694ba9f7fae',
    startBlock: 87335242,
    rewardsCalcEnabled: true,
    svrFeeReceiver: '0xb3e79c7cac540ca833015e63d96d3032ba0c4129',
  },
  {
    network: 'linea',
    chainId: 59144,
    url: `https://rpc.ankr.com/linea/${ankrKey}`,
    sortPosition: 9,
    blockscanOrigin: 'https://lineascan.build/',
    displayName: 'Linea',
    indexingEnabled: true,
    reorgWindow: 32,
    configuratorV3: '0x970ffd8e335b8fa4cd5c869c7cac3a90671d5dc3',
    rewardsV3: '0x2c7118c4C88B9841FCF839074c26Ae8f035f2921',
    startBlock: 15197724,
    rewardsCalcEnabled: true,
  },
  {
    network: 'scroll',
    chainId: 534352,
    url: `https://rpc.ankr.com/scroll/${ankrKey}`,
    sortPosition: 10,
    blockscanOrigin: 'https://scrollscan.com/',
    displayName: 'Scroll',
    indexingEnabled: true,
    reorgWindow: 32,
    configuratorV3: '0xecab0beea3e5dea0c35d3e69468eac20098032d7',
    rewardsV3: '0x70167d30964cbfdc315ecae02441af747be0c5ee',
    startBlock: 3397679,
    rewardsCalcEnabled: true,
  },
  {
    network: 'avalanche',
    chainId: 43114,
    url: 'https://api.avax.network/ext/bc/C/rpc',
    sortPosition: 11,
    blockscanOrigin: 'https://snowtrace.io/',
    displayName: 'Avalanche',
    indexingEnabled: false, // !: no contracts
    reorgWindow: 5,
    configuratorV3: undefined, // ?: not found
    rewardsV3: undefined,
    startBlock: undefined,
    rewardsCalcEnabled: false, // !: no indexed data
  },
  {
    network: 'sepolia',
    chainId: 11155111,
    url: `https://rpc.ankr.com/eth_sepolia/${ankrKey}`,
    sortPosition: 12,
    blockscanOrigin: 'https://sepolia.etherscan.io/',
    displayName: 'Ethereum Sepolia Testnet',
    indexingEnabled: true,
    reorgWindow: 128,
    configuratorV3: '0xc28ad44975c614eabe0ed090207314549e1c6624',
    rewardsV3: '0x8bf5b658bdf0388e8b482ed51b14aef58f90abfd',
    startBlock: 5343451,
    rewardsCalcEnabled: false, // !: testnet
  },
  {
    network: 'fuji',
    chainId: 43113,
    url: 'https://api.avax-test.network/ext/bc/C/rpc',
    sortPosition: 15,
    blockscanOrigin: 'https://testnet.snowtrace.io/',
    displayName: 'Avalanche Fuji Testnet',
    indexingEnabled: false, // !: weak RPC
    reorgWindow: 128,
    configuratorV3: '0x8c083632099cba949ea61a3044db1b5a27818b20',
    rewardsV3: '0x7ca364f9c4257fe2e22d503dd0e3f1c1db41591d',
    startBlock: 12387117,
    rewardsCalcEnabled: false, // !: testnet, no indexed data
  },
]);
